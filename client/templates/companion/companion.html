<template name="companion">
    <h1 class="companion__header col-xs-12 text-center">Watch Live</h1>
    <div class="row">
        <h2 class="companion__counter col-xs-12 text-center"><b>{{durationText}}:</b> {{duration}}</h2>
    </div>

    {{#if isLive}}

        {{#if contentActive}}
            <div class="companion__content row">
                {{#if hasContent}}

                    <div class="companion__text col-xs-10 col-xs-offset-1">{{stream.liveContent.text}}</div>

                    {{#if contentType 'link'}}
                        <div class="col-xs-10 col-xs-offset-1">
                            <a class="companion__text companion__link text-center" href="{{stream.liveContent.link}}"
                               target="_blank">{{stream.liveContent.message}}</a>
                        </div>
                    {{/if}}
                    {{#if contentType 'tweet'}}
                        <blockquote class="twitter-tweet" lang="en">
                            <p lang="en" dir="ltr">
                                {{stream.liveContent.message}}
                            </p>&mdash; {{stream.liveContent.tweeter}} <a href="{{stream.liveContent.link}}"></a>
                        </blockquote>
                        <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
                    {{/if}}
                    {{#if contentType 'yt'}}
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/{{stream.liveContent.link}}"
                                frameborder="0" allowfullscreen></iframe>
                    {{/if}}
                    {{#if contentType 'image'}}
                        <img class="companion__image col-xs-12 col-md-8 col-md-offset-2" src="{{stream.liveContent.link}}"/>
                    {{/if}}
                {{else}}
                    <div class="companion__content-placeholder col-xs-12 col-md-6 col-md-offset-3 text-center">
                        Content will appear here
                    </div>
                {{/if}}
            </div>

            <div class="row">
                <!--<h2>Stats</h2>-->

                <!--<div class="stats">-->
                <!--<li class="stat">Duration: {{duration}}</li>-->
                <!--</div>-->
            </div>
        {{else}}
            {{#if infoActive}}
                <div class="companion__info row">
                    {{#unless detailActive}}
                        <div class="col-xs-12">
                            <div class="row">
                                {{#each liveChars}}
                                    <div class="track__char col-xs-4">
                                        <div class="row">
                                            <div class="track__name col-xs-12" data-hook="detail-button"
                                                 data-name="{{name}}">{{name}}</div>
                                            <img class="pointer col-xs-12" src="{{imageURL}}"
                                                 data-hook="detail-button"
                                                 data-name={{name}}>
                                        </div>
                                    </div>
                                {{/each}}
                            </div>
                        </div>
                    {{else}}
                        <div class="char__detail">
                                {{#with character}}
                                    {{> charPage}}
                                {{/with}}
                        </div>
                        <div class="row">
                            {{#each liveChars}}
                                <a class="col-xs-4 watch__char-name {{detailClass name}}" data-hook="detail-button"
                                   data-name="{{name}}">{{name}}</a>
                            {{/each}}
                        </div>
                    {{/unless}}
                </div>
            {{else}}
                {{#if giveawayActive}}
                    <div class="companion__giveaway row">
                        <div class="giveaway__bar col-xs-12 col-md-6 col-md-offset-3">
                            <div class="giveaway__sub-bar" data-hook="sub-bar"></div>
                        </div>
                        <div class="giveaway__meter col-xs-10 col-xs-offset-1 col-md-6 col-md-offset-3" data-hook="bar-parent">
                            <svg class="giveaway__meter-bar giveaway__meter-back" width="250" height="250" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <circle r="100" cy="126" cx="126" stroke-width="20" stroke="#E73023" fill="none"/>
                                </g>
                            </svg>
                            <div class="giveaway__percent">{{subPercent}}%</div>
                            <svg class="giveaway__meter-bar giveaway__meter-front" width="250" height="250" xmlns="http://www.w3.org/2000/svg">
                                <g>
                                    <title>Layer 1</title>
                                    <circle class="circle_animation" r="100" cy="126" cx="126" stroke-width="20" stroke="#E6A22D" fill="none" data-hook="giveaway-circle"/>
                                </g>
                            </svg>
                        </div>
                        <div class="col-xs-12 col-md-6 col-md-offset-3">
                            <div class="giveaway__subs">Subscribers: {{stream.subCount}}</div>
                            <div class="giveaway__sub-remaining">Subs Remaining: {{subsLeft}}</div>
                            <div class="giveaway__winner">Giveaway Winner: {{stream.subWinner}}</div>
                        </div>
                    </div>
                {{/if}}
            {{/if}}
        {{/if}}
        <div class="menu row">
            <a class="button menu__button col-xs-4 {{menuActive 'content'}}"
               data-hook="content-button">
                <i class="fa fa-eye"></i>

                <div class="hidden-xs hidden-sm">Content</div>
            </a>
            <a class="button menu__button col-xs-4 {{menuActive 'info'}}" data-hook="info-button">
                <i class="fa fa-users"></i>

                <div class="hidden-xs hidden-sm">Characters</div>
            </a>
            <a class="button menu__button col-xs-4 {{menuActive 'giveaway'}}" data-hook="giveaway-button">
                <i class="fa fa-trophy"></i>

                <div class="hidden-xs hidden-sm">Giveaway</div>
            </a>
        </div>

    {{else}}

        <h2>Sorry, Critical Role isn't live right now. Come back on Thursday at 7pm PST!</h2>

    {{/if}}
</template>