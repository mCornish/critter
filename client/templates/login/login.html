<template name="login">

    {{#unless currentUser}}
        <div class="login">
            <div class="row">
                <div class="row col-xs-10 col-xs-offset-1 col-md-6 col-md-offset-3">
                    <a class="login__facebook button button--addon col-xs-12" href="#"
                       data-hook="facebook">
                        <div class="login__facebook-icon button--addon__addon col-xs-3"><i class="icon-facebook"></i>
                        </div>
                        <span class="col-xs-9">Use Facebook</span>
                    </a>
                </div>
            </div>

            <div class="row">
                <hr class="col-xs-10 col-xs-offset-1 col-md-6 col-md-offset-3">
            </div>

            <div class="row">
                <form class="login__form col-xs-10 col-xs-offset-1 col-md-6 col-md-offset-3" data-hook="signup">
                    {{#unless forgottenPassword}}
                        <div class="input-group {{errorClass 'username'}}">
                            <input class="input-group__input" name="username" data-hook="username" type="email"
                                   placeholder="Email">
                            <span class="input-group__bar"></span>
                            <span class="help-block">{{errorMessage 'username'}}</span>
                        </div>
                        <div class="input-group {{errorClass 'password'}}">
                            <input class="input-group__input" name="password" data-hook="password" type="password"
                                   placeholder="Password">
                            <span class="input-group__bar"></span>
                            <span class="help-block">{{errorMessage 'password'}}</span>
                        </div>
                        {{#if creatingUser}}
                            <div class="input-group {{errorClass 'passwordAgain'}}">
                                <input class="input-group__input" name="password-again" data-hook="password-again"
                                       type="password" placeholder="Password (again)">
                                <span class="input-group__bar"></span>
                                <span class="help-block">{{errorMessage 'passwordAgain'}}</span>
                            </div>
                        {{/if}}
                    {{else}}
                        <h2 class="text-center">What is your email address?</h2>
                        <div class="input-group {{errorClass 'email'}}">
                            <input class="input-group__input" name="email" data-hook="email" type="email"
                                   placeholder="Email">
                            <span class="input-group__bar"></span>
                            <span class="help-block">{{errorMessage 'email'}}</span>
                        </div>
                    {{/unless}}

                    {{#unless forgottenPassword}}
                    <div class="login__links row">
                        {{#unless creatingUser}}
                            <a class="login__link col-xs-6 text-center" data-hook="switch-state">Register Instead</a>
                            <!-- TODO Hook up forgotten password -->
                            <a class="login__link col-xs-6 text-center" data-hook="forgotten-password">Forgot
                                Password</a>
                        {{else}}
                            <a class="login__link col-xs-12 text-center" data-hook="switch-state">Log In Instead</a>
                        {{/unless}}
                    </div>
                    {{/unless}}

                    <div class="login__buttons row">
                        {{#unless forgottenPassword}}
                            <a class="button col-xs-12 col-md-7 col-md-push-5" href="#"
                               data-hook="submit">
                                {{#unless creatingUser}}
                                    <span>Log In</span>
                                {{else}}
                                    <span>Register</span>
                                {{/unless}}
                            </a>
                            <a class="button button--cancel col-xs-12 col-md-4 col-md-pull-7"
                               data-hook="login-cancel">Cancel</a>
                        {{else}}
                            <a class="button col-xs-12 col-md-7 col-md-push-5" href="#"
                               data-hook="submit">
                                <span>Email Me</span>
                            </a>
                            <a class="button button--cancel col-xs-12 col-md-4 col-md-pull-7" data-hook="password-cancel">Cancel</a>
                        {{/unless}}
                    </div>
                </form>
            </div>
        </div>
    {{else}}
        <p>You are logged in as {{name}}!</p>
    {{/unless}}
</template>